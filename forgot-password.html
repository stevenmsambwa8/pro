<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Forgot Password</title>  
    <style>  
        body {  
            font-family: sans-serif;  
            display: flex;  
            justify-content: center;  
            align-items: center;  
            min-height: 100vh;  
            background-color: #f0f0f0;  
        }  
  
        .container {  
            background-color: white;  
            padding: 20px;  
            border-radius: 5px;  
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);  
            text-align: center;  
        }  
  
        input[type="email"] {  
            padding: 10px;  
            margin: 10px 0;  
            border: 1px solid #ccc;  
            border-radius: 4px;  
            width: 100%;  
            box-sizing: border-box; /* Prevent padding from increasing width */  
        }  
  
        button {  
            background-color: #007bff;  
            color: white;  
            padding: 10px 20px;  
            border: none;  
            border-radius: 4px;  
            cursor: pointer;  
        }  
  
        #message {  
            margin-top: 10px;  
            color: red;  
        }  
    </style>  
</head>  
<body>  
    <div class="container">  
        <h1>Forgot Your Password?</h1>  
        <p>Enter your email address to receive a password reset link.</p>  
        <input type="email" id="email" placeholder="Your Email Address" required>  
        <button id="resetButton">Send Reset Link</button>  
        <div id="message"></div>  
    </div>  
  
<script>  
    window.isLocalhost = false; // Default to false (production)  
</script>  
<script type="module">  
  import { supabase } from './supabase-client.js';  

  document.addEventListener('DOMContentLoaded', () => {  
      const resetButton = document.getElementById('resetButton');  
      const emailInput = document.getElementById('email');  
      const messageDiv = document.getElementById('message');  

      resetButton.addEventListener('click', async () => {  
          const email = emailInput.value.trim();  

          if (!email) {  
              messageDiv.textContent = 'Please enter your email address.';  
              messageDiv.style.color = 'red';  
              return;  
          }  

          messageDiv.textContent = 'Sending reset link...';  
          messageDiv.style.color = 'orange';  

          try {  
              const redirectURL = window.isLocalhost  
                  ? 'http://127.0.0.1:5500/reset-password.html'  
                  : 'https://vynal.dev/reset-password.html';  

              const { error } = await supabase.auth.resetPasswordForEmail(email, {  
                  redirectTo: redirectURL  
              });  

              if (error) throw error;  

              messageDiv.textContent = 'Reset link sent to your email.';  
              messageDiv.style.color = 'green';  
          } catch (err) {  
              console.error('Error sending reset link:', err);  
              messageDiv.textContent = err.message || 'Failed to send reset link.';  
              messageDiv.style.color = 'red';  
          }  
      });  
  });  
</script>  
</body>  
</html>  
